<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é»„æ²³æ¼‚æµå¤§å†’é™© - æ–¹å¯¸å±é—´ï¼Œä¸‡é‡Œæ²³å±±</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0a192f, #112240, #1a2a6c);
            color: white;
            min-height: 100vh;
            line-height: 1.6;
        }
        
        header {
            background: rgba(10, 25, 47, 0.95);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-image {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid white;
        }

        .logo-text {
            font-size: 28px;
            font-weight: 700;
            background: linear-gradient(45deg, #64ffda, #4fd3c4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        
        nav ul {
            list-style: none;
            display: flex;
            gap: 1.5rem;
        }
        
        nav a {
            color: white;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            transition: all 0.3s ease;
        }
        
        nav a:hover {
            background: rgba(100, 255, 218, 0.1);
        }
        
        .page-hero {
            position: relative;
            padding: 4rem 2rem;
            text-align: center;
            background: rgba(0, 0, 0, 0.3);
        }
        
        .hero-content h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            background: linear-gradient(45deg, #64ffda, #4fd3c4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .hero-content p {
            font-size: 1.2rem;
            color: #a8b2d1;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .game-container {
            max-width: 900px;
            margin: 2rem auto;
            padding: 2rem;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .game-section {
            text-align: center;
        }
        
        .game-section h3 {
            color: #64ffda;
            margin-bottom: 1rem;
            font-size: 1.8rem;
        }
        
        .game-section p {
            color: #a8b2d1;
            margin-bottom: 2rem;
        }
        
        /* é»„æ²³æ¸¸æˆæ ·å¼ */
        .river-game-container {
            margin: 1rem auto;
        }
        
        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding: 0 1rem;
        }
        
        .stats-container {
            display: flex;
            gap: 1.5rem;
        }
        
        .stat-item {
            background: rgba(100, 255, 218, 0.1);
            padding: 0.8rem 1.2rem;
            border-radius: 10px;
            border: 1px solid rgba(100, 255, 218, 0.3);
            text-align: center;
            min-width: 120px;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #a8b2d1;
            margin-bottom: 0.3rem;
        }
        
        .stat-value {
            font-size: 1.3rem;
            font-weight: bold;
            color: #64ffda;
        }
        
        .river-game {
            position: relative;
            margin: 1rem auto;
        }
        
        .river-game canvas {
            border: 3px solid #64ffda;
            border-radius: 12px;
            background: linear-gradient(to bottom, #1a5276, #2980b9, #85c1e9);
            display: block;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
        }
        
        /* æ¸¸æˆæ§åˆ¶æŒ‰é’® */
        .game-controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 1.5rem 0;
            flex-wrap: wrap;
        }
        
        .btn {
            background: #64ffda;
            color: #0a192f;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            font-size: 1rem;
        }
        
        .btn:hover {
            background: #4fd3c4;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(100, 255, 218, 0.3);
        }
        
        .btn:disabled {
            background: #4a5568;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .btn-secondary {
            background: transparent;
            color: #64ffda;
            border: 1px solid #64ffda;
        }
        
        .btn-secondary:hover {
            background: rgba(100, 255, 218, 0.1);
        }
        
        /* æ¸¸æˆè¯´æ˜ */
        .game-instructions {
            margin-top: 2rem;
            padding: 1.5rem;
            background: rgba(100, 255, 218, 0.1);
            border-radius: 10px;
            border: 1px solid rgba(100, 255, 218, 0.3);
        }
        
        .game-instructions h4 {
            color: #64ffda;
            margin-bottom: 1rem;
        }
        
        .game-instructions p {
            color: #a8b2d1;
            margin-bottom: 0.5rem;
        }
        
        .difficulty-info {
            display: flex;
            justify-content: space-around;
            margin-top: 1rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
        }
        
        .difficulty-item {
            text-align: center;
        }
        
        .difficulty-item .icon {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }
        
        /* æ¸¸æˆç»“æœ */
        .game-result {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 5px;
            text-align: center;
        }
        
        .success-message {
            background: rgba(76, 175, 80, 0.2);
            border: 1px solid #4caf50;
            color: #4caf50;
            padding: 1rem;
            border-radius: 5px;
        }
        
        .info-message {
            background: rgba(100, 255, 218, 0.1);
            border: 1px solid rgba(100, 255, 218, 0.3);
            color: #64ffda;
            padding: 1rem;
            border-radius: 5px;
        }
        
        .warning-message {
            background: rgba(255, 152, 0, 0.2);
            border: 1px solid #ff9800;
            color: #ff9800;
            padding: 1rem;
            border-radius: 5px;
        }
        
        /* ç§»åŠ¨ç«¯æ§åˆ¶æŒ‰é’® */
        .mobile-controls {
            display: none;
            justify-content: space-between;
            margin: 1rem 0;
            padding: 0 2rem;
        }
        
        .mobile-btn {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: rgba(100, 255, 218, 0.3);
            border: 2px solid #64ffda;
            color: white;
            font-size: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            user-select: none;
            -webkit-user-select: none;
            touch-action: manipulation;
        }
        
        .mobile-btn:active {
            background: rgba(100, 255, 218, 0.6);
            transform: scale(0.95);
        }
        
        .boost-btn {
            background: rgba(33, 150, 243, 0.3);
            border-color: #2196f3;
        }
        
        .boost-btn:active {
            background: rgba(33, 150, 243, 0.6);
        }
        
        footer {
            text-align: center;
            padding: 2rem;
            background: rgba(10, 25, 47, 0.9);
            margin-top: 3rem;
        }
        
        footer a {
            color: #64ffda;
            text-decoration: none;
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .game-header {
                flex-direction: column;
                gap: 1rem;
            }
            
            .stats-container {
                justify-content: center;
            }
            
            .river-game canvas {
                width: 100%;
                max-width: 500px;
            }
            
            /* æ˜¾ç¤ºç§»åŠ¨ç«¯æ§åˆ¶æŒ‰é’® */
            .mobile-controls {
                display: flex;
            }
            
            .mobile-controls .mobile-btn {
                width: 70px;
                height: 70px;
                font-size: 1.8rem;
            }
        }
        
        @media (max-width: 480px) {
            .stats-container {
                flex-direction: column;
                align-items: center;
            }
            
            .stat-item {
                width: 100%;
                max-width: 200px;
            }
            
            .game-controls {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 100%;
                max-width: 200px;
            }
            
            .mobile-controls {
                padding: 0 1rem;
            }
            
            .mobile-controls .mobile-btn {
                width: 60px;
                height: 60px;
                font-size: 1.5rem;
            }
            
            .page-hero {
                padding: 2rem 1rem;
            }
            
            .hero-content h1 {
                font-size: 2rem;
            }
            
            .game-container {
                padding: 1rem;
                margin: 1rem;
            }
        }

        /* å¹³æ¿è®¾å¤‡ä¼˜åŒ– */
        @media (min-width: 769px) and (max-width: 1024px) {
            .river-game canvas {
                width: 100%;
                max-width: 700px;
            }
            
            .mobile-controls {
                display: flex;
                max-width: 500px;
                margin: 1rem auto;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">
            <img src="images/item/item.jpg" alt="æ–¹å¯¸å±é—´ï¼Œä¸‡é‡Œæ²³å±±" class="logo-image">
            <span class="logo-text">æ–¹å¯¸å±é—´ï¼Œä¸‡é‡Œæ²³å±±</span>
        </div>
        <nav>
            <ul>
                <li><a href="index.html#mountains" class="btn">è¿”å›</a></li>
            </ul>
        </nav>
    </header>
    
    <section class="page-hero">
        <div class="hero-content">
            <h1>é»„æ²³æ¼‚æµå¤§å†’é™©</h1>
            <p>æ²¿ç€æ¯äº²æ²³é»„æ²³æ¼‚æµï¼Œæ”¶é›†æ²¿å²¸é£æ™¯ï¼Œé¿å¼€å±é™©éšœç¢ï¼Œä½“éªŒé»„æ²³çš„å£®ä¸½ä¸æƒŠé™©</p>
        </div>
    </section>
    
    <main class="game-container">
        <div class="game-section">
            <h3>é»„æ²³æ¼‚æµæŒ‘æˆ˜</h3>
            <p>æ§åˆ¶å°èˆ¹åœ¨é»„æ²³ä¸Šæ¼‚æµï¼Œæ”¶é›†é£æ™¯é‡‘å¸ï¼Œé¿å¼€å±é™©éšœç¢ï¼ŒæŒ‘æˆ˜æœ€é«˜åˆ†æ•°ï¼</p>
            
            <div class="river-game-container">
                <div class="game-header">
                    <div class="stats-container">
                        <div class="stat-item">
                            <div class="stat-label">å½“å‰åˆ†æ•°</div>
                            <div class="stat-value" id="score">0</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">å‰©ä½™ç”Ÿå‘½</div>
                            <div class="stat-value" id="lives">3</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">æ¼‚æµè·ç¦»</div>
                            <div class="stat-value" id="distance">0m</div>
                        </div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">æ¸¸æˆéš¾åº¦</div>
                        <div class="stat-value" id="difficulty">æ™®é€š</div>
                    </div>
                </div>
                
                <div class="river-game">
                    <canvas id="riverCanvas" width="800" height="500"></canvas>
                </div>
                
                <!-- ç§»åŠ¨ç«¯æ§åˆ¶æŒ‰é’® -->
                <div class="mobile-controls">
                    <div class="mobile-btn left-btn">â†</div>
                    <div class="mobile-btn boost-btn">âš¡</div>
                    <div class="mobile-btn right-btn">â†’</div>
                </div>
                
                <div class="game-controls">
                    <button class="btn" id="startGameBtn">å¼€å§‹æ¼‚æµ</button>
                    <button class="btn btn-secondary" id="pauseBtn" disabled>æš‚åœæ¸¸æˆ</button>
                    <button class="btn btn-secondary" id="restartBtn">é‡æ–°å¼€å§‹</button>
                </div>
                
                <div id="gameResult" class="game-result">
                    <div class="info-message">
                        ä½¿ç”¨ â† â†’ æ–¹å‘é”®æ§åˆ¶èˆ¹åªç§»åŠ¨ï¼Œç©ºæ ¼é”®åŠ é€Ÿï¼é¿å¼€ç‚¸å¼¹å’Œæ¼©æ¶¡ï¼Œæ”¶é›†é‡‘å¸å’Œé£æ™¯ç‚¹ï¼
                        <div style="margin-top: 10px; font-size: 0.9em;">
                            æ‰‹æœº/å¹³æ¿ï¼šä½¿ç”¨å±å¹•ä¸‹æ–¹çš„æ§åˆ¶æŒ‰é’®
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="game-instructions">
                <h4>æ¸¸æˆè¯´æ˜ & éš¾åº¦æå‡</h4>
                <p>ğŸ¯ <strong>æ¸¸æˆç›®æ ‡ï¼š</strong>åœ¨é»„æ²³ä¸Šå°½å¯èƒ½æ¼‚æµæ›´è¿œè·ç¦»ï¼Œæ”¶é›†æ›´å¤šé£æ™¯é‡‘å¸</p>
                <p>ğŸ® <strong>æ“ä½œæ–¹å¼ï¼š</strong>
                    <span style="color:#64ffda">ç”µè„‘ï¼š</span>â† â†’ æ–¹å‘é”®æ§åˆ¶å·¦å³ç§»åŠ¨ï¼Œç©ºæ ¼é”®çŸ­æš‚åŠ é€Ÿ<br>
                    <span style="color:#64ffda">æ‰‹æœº/å¹³æ¿ï¼š</span>ä½¿ç”¨å±å¹•ä¸‹æ–¹çš„æ§åˆ¶æŒ‰é’®
                </p>
                <p>âš ï¸ <strong>å±é™©éšœç¢ï¼š</strong>
                    <span style="color:#ff4444">ğŸ’£ ç‚¸å¼¹</span> - ç¢°åˆ°å‡å°‘ç”Ÿå‘½å€¼ | 
                    <span style="color:#ff6b6b">ğŸŒ€ æ¼©æ¶¡</span> - ä½¿èˆ¹åªå¤±æ§ | 
                    <span style="color:#ffa726">ğŸŒªï¸ é£æš´</span> - æŒç»­ä¼¤å®³
                </p>
                <p>ğŸŒŸ <strong>æ”¶é›†ç‰©å“ï¼š</strong>
                    <span style="color:#ffd700">ğŸ’° é‡‘å¸</span> - å¢åŠ åˆ†æ•° | 
                    <span style="color:#4caf50">ğŸ’š ç”Ÿå‘½</span> - æ¢å¤ç”Ÿå‘½å€¼ | 
                    <span style="color:#2196f3">ğŸ“¸ é£æ™¯ç‚¹</span> - å¤§é‡åˆ†æ•°
                </p>
                
                <div class="difficulty-info">
                    <div class="difficulty-item">
                        <div class="icon">ğŸŒŠ</div>
                        <div>æ°´æµé€Ÿåº¦éšè·ç¦»å¢åŠ </div>
                    </div>
                    <div class="difficulty-item">
                        <div class="icon">âš¡</div>
                        <div>éšœç¢ç‰©é¢‘ç‡æå‡</div>
                    </div>
                    <div class="difficulty-item">
                        <div class="icon">ğŸ¯</div>
                        <div>æ”¶é›†ç‰©ç§»åŠ¨è½¨è¿¹å¤æ‚</div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <footer>
        <p>æ–¹å¯¸å±é—´ï¼Œä¸‡é‡Œæ²³å±±</p>
        <p>2025æ­¦æ±‰å¤§å­¦å‚èµ›ä½œå“ | <a href="message-board.html">åˆ†äº«ä½ çš„å±±æ²³æ•…äº‹</a></p>
    </footer>

    <script>
        // æ¸¸æˆå˜é‡
        let gameActive = false;
        let gamePaused = false;
        let score = 0;
        let lives = 3;
        let distance = 0;
        let boatX = 400;
        let boatY = 400;
        let boatVelocityX = 0;
        let boatSpeed = 5;
        let boostActive = false;
        let boostTime = 0;
        let gameInterval;
        
        // æ¸¸æˆå…ƒç´ 
        let scenery = [];
        let obstacles = [];
        let powerUps = [];
        let particles = [];
        let lastObstacleTime = 0;
        let lastSceneryTime = 0;
        let lastPowerUpTime = 0;
        let gameTime = 0;
        
        // éš¾åº¦è®¾ç½®
        let difficultyLevel = 1;
        let obstacleFrequency = 1.5;
        let sceneryFrequency = 2;
        let currentSpeed = 3;
        
        // ç§»åŠ¨ç«¯æ§åˆ¶çŠ¶æ€
        let leftPressed = false;
        let rightPressed = false;
        
        // DOMå…ƒç´ 
        const canvas = document.getElementById('riverCanvas');
        const ctx = canvas.getContext('2d');
        const scoreElement = document.getElementById('score');
        const livesElement = document.getElementById('lives');
        const distanceElement = document.getElementById('distance');
        const difficultyElement = document.getElementById('difficulty');
        const startGameBtn = document.getElementById('startGameBtn');
        const pauseBtn = document.getElementById('pauseBtn');
        const restartBtn = document.getElementById('restartBtn');
        const gameResult = document.getElementById('gameResult');
        
        // ç§»åŠ¨ç«¯æ§åˆ¶æŒ‰é’®
        const leftBtn = document.querySelector('.left-btn');
        const rightBtn = document.querySelector('.right-btn');
        const boostBtn = document.querySelector('.boost-btn');

        // åˆå§‹åŒ–æ¸¸æˆ
        function initGame() {
            // åœæ­¢ä¹‹å‰çš„æ¸¸æˆå¾ªç¯
            if (gameInterval) {
                clearInterval(gameInterval);
                gameInterval = null;
            }
            
            gameActive = false;
            gamePaused = false;
            score = 0;
            lives = 3;
            distance = 0;
            boatX = 400;
            boatY = 400;
            boatVelocityX = 0;
            difficultyLevel = 1;
            obstacleFrequency = 1.5;
            sceneryFrequency = 2;
            currentSpeed = 3;
            gameTime = 0;
            
            // æ¸…ç©ºæ‰€æœ‰æ¸¸æˆå…ƒç´ 
            scenery = [];
            obstacles = [];
            powerUps = [];
            particles = [];
            lastObstacleTime = 0;
            lastSceneryTime = 0;
            lastPowerUpTime = 0;
            
            // é‡ç½®ç§»åŠ¨ç«¯æ§åˆ¶çŠ¶æ€
            leftPressed = false;
            rightPressed = false;
            
            updateDisplay();
            drawGame();
            
            startGameBtn.disabled = false;
            startGameBtn.textContent = 'å¼€å§‹æ¼‚æµ';
            pauseBtn.disabled = true;
            pauseBtn.textContent = 'æš‚åœæ¸¸æˆ';
            
            gameResult.innerHTML = `
                <div class="info-message">
                    å‡†å¤‡å¼€å§‹é»„æ²³æ¼‚æµï¼ä½¿ç”¨ â† â†’ æ–¹å‘é”®æ§åˆ¶èˆ¹åªï¼Œç©ºæ ¼é”®åŠ é€Ÿï¼
                    <div style="margin-top: 10px; font-size: 0.9em;">
                        æ‰‹æœº/å¹³æ¿ï¼šä½¿ç”¨å±å¹•ä¸‹æ–¹çš„æ§åˆ¶æŒ‰é’®
                    </div>
                </div>
            `;
        }
        
        // å¼€å§‹æ¸¸æˆ
        function startGame() {
            if (gameActive) return;
            
            gameActive = true;
            gamePaused = false;
            startGameBtn.disabled = true;
            pauseBtn.disabled = false;
            
            gameResult.innerHTML = `
                <div class="info-message">
                    æ¸¸æˆè¿›è¡Œä¸­ï¼é¿å¼€å±é™©ï¼Œæ”¶é›†é£æ™¯é‡‘å¸ï¼
                </div>
            `;
            
            // æ¸¸æˆä¸»å¾ªç¯
            gameInterval = setInterval(() => {
                if (!gameActive || gamePaused) return;
                
                updateGame();
                drawGame();
                updateDisplay();
                
                // æ›´æ–°éš¾åº¦
                updateDifficulty();
                
            }, 16);
        }
        
        // æ›´æ–°æ¸¸æˆçŠ¶æ€
        function updateGame() {
            if (!gameActive || gamePaused) return;
            
            gameTime += 0.016;
            
            // æ›´æ–°èˆ¹åªä½ç½® - ä¼˜å…ˆä½¿ç”¨é”®ç›˜æ§åˆ¶ï¼Œå¦‚æœæ²¡æœ‰é”®ç›˜è¾“å…¥å†ä½¿ç”¨ç§»åŠ¨ç«¯æ§åˆ¶
            if (boatVelocityX !== 0) {
                // ä½¿ç”¨é”®ç›˜æ§åˆ¶
                boatX += boatVelocityX;
            } else {
                // ä½¿ç”¨ç§»åŠ¨ç«¯æ§åˆ¶
                if (leftPressed) {
                    boatX -= boatSpeed;
                } else if (rightPressed) {
                    boatX += boatSpeed;
                }
            }
            
            boatX = Math.max(30, Math.min(canvas.width - 30, boatX));
            
            // å¤„ç†åŠ é€Ÿæ•ˆæœ
            if (boostActive) {
                boostTime -= 0.016;
                if (boostTime <= 0) {
                    boostActive = false;
                }
            }
            
            // ç”Ÿæˆéšœç¢ç‰©
            if (gameTime - lastObstacleTime > obstacleFrequency) {
                generateObstacle();
                lastObstacleTime = gameTime;
            }
            
            // ç”Ÿæˆé£æ™¯ç‚¹
            if (gameTime - lastSceneryTime > sceneryFrequency) {
                generateScenery();
                lastSceneryTime = gameTime;
            }
            
            // ç”Ÿæˆèƒ½é‡é“å…·
            if (gameTime - lastPowerUpTime > 8) {
                generatePowerUp();
                lastPowerUpTime = gameTime;
            }
            
            // æ›´æ–°éšœç¢ç‰©
            updateObstacles();
            
            // æ›´æ–°é£æ™¯ç‚¹
            updateScenery();
            
            // æ›´æ–°èƒ½é‡é“å…·
            updatePowerUps();
            
            // æ›´æ–°ç²’å­æ•ˆæœ
            updateParticles();
            
            // å¢åŠ æ¼‚æµè·ç¦»
            distance += currentSpeed * 0.1;
        }
        
        // æ›´æ–°éšœç¢ç‰©
        function updateObstacles() {
            for (let i = obstacles.length - 1; i >= 0; i--) {
                const obstacle = obstacles[i];
                obstacle.y += obstacle.speed;
                obstacle.rotation += obstacle.rotationSpeed;
                
                // ç¢°æ’æ£€æµ‹
                const distance = Math.sqrt(
                    Math.pow(boatX - obstacle.x, 2) + Math.pow(boatY - obstacle.y, 2)
                );
                
                if (distance < 30 + obstacle.radius) {
                    lives -= obstacle.damage;
                    createExplosion(obstacle.x, obstacle.y, obstacle.color);
                    obstacles.splice(i, 1);
                    
                    // ç«‹å³æ›´æ–°æ˜¾ç¤º
                    updateDisplay();
                    
                    // æ£€æŸ¥æ¸¸æˆç»“æŸ
                    if (lives <= 0) {
                        gameOver();
                        return; // ç«‹å³è¿”å›ï¼Œä¸å†å¤„ç†å…¶ä»–éšœç¢ç‰©
                    }
                    continue;
                }
                
                // ç§»é™¤è¶…å‡ºå±å¹•çš„éšœç¢ç‰©
                if (obstacle.y > canvas.height + 50) {
                    obstacles.splice(i, 1);
                }
            }
        }
        
        // æ¸¸æˆç»“æŸ
        function gameOver() {
            console.log("æ¸¸æˆç»“æŸè¢«è°ƒç”¨ï¼Œå½“å‰ç”Ÿå‘½å€¼:", lives);
            
            // ç«‹å³åœæ­¢æ¸¸æˆå¾ªç¯
            if (gameInterval) {
                clearInterval(gameInterval);
                gameInterval = null;
            }
            
            gameActive = false;
            lives = 0;
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            startGameBtn.disabled = false;
            startGameBtn.textContent = 'é‡æ–°å¼€å§‹';
            pauseBtn.disabled = true;
            
            // æ›´æ–°æ˜¾ç¤º
            updateDisplay();
            
            gameResult.innerHTML = `
                <div class="warning-message">
                    ğŸ’¥ æ¼‚æµç»“æŸï¼<br>
                    æœ€ç»ˆåˆ†æ•°: ${score} | æ¼‚æµè·ç¦»: ${Math.floor(distance)}m | éš¾åº¦: ${difficultyElement.textContent}<br>
                    <small>ç‚¹å‡»"é‡æ–°å¼€å§‹"å†æ¬¡æŒ‘æˆ˜é»„æ²³ï¼</small>
                </div>
            `;
        }
        
        // æš‚åœæ¸¸æˆ
        function pauseGame() {
            if (!gameActive) return;
            
            gamePaused = !gamePaused;
            pauseBtn.textContent = gamePaused ? 'ç»§ç»­æ¸¸æˆ' : 'æš‚åœæ¸¸æˆ';
            
            if (gamePaused) {
                gameResult.innerHTML = `
                    <div class="info-message">
                        æ¸¸æˆå·²æš‚åœ
                    </div>
                `;
            } else {
                gameResult.innerHTML = `
                    <div class="info-message">
                        æ¸¸æˆç»§ç»­ï¼
                    </div>
                `;
            }
        }
        
        // é”®ç›˜æ§åˆ¶ï¼ˆç”µè„‘ç«¯ï¼‰
        document.addEventListener('keydown', (e) => {
            if (!gameActive || gamePaused) return;
            
            switch(e.key) {
                case 'ArrowLeft':
                    boatVelocityX = -boatSpeed;
                    break;
                case 'ArrowRight':
                    boatVelocityX = boatSpeed;
                    break;
                case ' ':
                case 'Spacebar':
                    if (!boostActive) {
                        boostActive = true;
                        boostTime = 3;
                    }
                    break;
            }
        });
        
        document.addEventListener('keyup', (e) => {
            if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') {
                boatVelocityX = 0;
            }
        });
        
        // ç§»åŠ¨ç«¯è§¦æ‘¸æ§åˆ¶
        function initMobileControls() {
            // å·¦æŒ‰é’®
            leftBtn.addEventListener('touchstart', (e) => {
                e.preventDefault();
                leftPressed = true;
            });
            
            leftBtn.addEventListener('touchend', (e) => {
                e.preventDefault();
                leftPressed = false;
            });
            
            // å³æŒ‰é’®
            rightBtn.addEventListener('touchstart', (e) => {
                e.preventDefault();
                rightPressed = true;
            });
            
            rightBtn.addEventListener('touchend', (e) => {
                e.preventDefault();
                rightPressed = false;
            });
            
            // åŠ é€ŸæŒ‰é’®
            boostBtn.addEventListener('touchstart', (e) => {
                e.preventDefault();
                if (!boostActive && gameActive && !gamePaused) {
                    boostActive = true;
                    boostTime = 3;
                }
            });
            
            // é˜²æ­¢æŒ‰é’®çš„é»˜è®¤è¡Œä¸º
            [leftBtn, rightBtn, boostBtn].forEach(btn => {
                btn.addEventListener('contextmenu', (e) => e.preventDefault());
                btn.style.webkitUserSelect = 'none';
                btn.style.userSelect = 'none';
            });
        }
        
        // æŒ‰é’®äº‹ä»¶
        startGameBtn.addEventListener('click', function() {
            if (lives <= 0) {
                initGame();
            } else {
                startGame();
            }
        });
        
        pauseBtn.addEventListener('click', pauseGame);
        restartBtn.addEventListener('click', initGame);
        
        // ç”Ÿæˆéšœç¢ç‰©
        function generateObstacle() {
            const obstacleTypes = [
                { type: 'bomb', emoji: 'ğŸ’£', color: '#ff4444', radius: 25, speed: currentSpeed + 1, damage: 1 },
                { type: 'vortex', emoji: 'ğŸŒ€', color: '#ff6b6b', radius: 30, speed: currentSpeed, damage: 0.5 },
                { type: 'storm', emoji: 'ğŸŒªï¸', color: '#ffa726', radius: 35, speed: currentSpeed - 0.5, damage: 0.3 }
            ];
            
            const type = obstacleTypes[Math.floor(Math.random() * obstacleTypes.length)];
            
            obstacles.push({
                x: Math.random() * (canvas.width - 60) + 30,
                y: -30,
                ...type,
                rotation: 0,
                rotationSpeed: (Math.random() - 0.5) * 0.1
            });
        }
        
        // ç”Ÿæˆé£æ™¯ç‚¹
        function generateScenery() {
            // é‡‘å¸
            scenery.push({
                x: Math.random() * (canvas.width - 40) + 20,
                y: -20,
                type: 'coin',
                emoji: 'ğŸ’°',
                value: 10,
                radius: 20,
                speed: currentSpeed + 0.5,
                collected: false,
                rotation: 0
            });
            
            // å¶å°”ç”Ÿæˆé«˜ä»·å€¼é£æ™¯ç‚¹
            if (Math.random() < 0.3) {
                scenery.push({
                    x: Math.random() * (canvas.width - 60) + 30,
                    y: -40,
                    type: 'landmark',
                    emoji: 'ğŸ“¸',
                    value: 50,
                    radius: 25,
                    speed: currentSpeed,
                    collected: false,
                    rotation: 0
                });
            }
        }
        
        // ç”Ÿæˆèƒ½é‡é“å…·
        function generatePowerUp() {
            const powerUpTypes = [
                { type: 'health', emoji: 'ğŸ’š', color: '#4caf50', radius: 22 },
                { type: 'boost', emoji: 'âš¡', color: '#2196f3', radius: 22 },
                { type: 'shield', emoji: 'ğŸ›¡ï¸', color: '#9c27b0', radius: 22 }
            ];
            
            const type = powerUpTypes[Math.floor(Math.random() * powerUpTypes.length)];
            
            powerUps.push({
                x: Math.random() * (canvas.width - 40) + 20,
                y: -20,
                ...type,
                speed: currentSpeed,
                collected: false,
                rotation: 0
            });
        }
        
        // æ›´æ–°é£æ™¯ç‚¹
        function updateScenery() {
            for (let i = scenery.length - 1; i >= 0; i--) {
                const item = scenery[i];
                item.y += item.speed;
                item.rotation += 0.05;
                
                // ç¢°æ’æ£€æµ‹
                const dist = Math.sqrt(
                    Math.pow(boatX - item.x, 2) + Math.pow(boatY - item.y, 2)
                );
                
                if (dist < 30 + item.radius && !item.collected) {
                    item.collected = true;
                    score += item.value;
                    createCollectionEffect(item.x, item.y, item.color);
                    scenery.splice(i, 1);
                    continue;
                }
                
                // ç§»é™¤è¶…å‡ºå±å¹•çš„é£æ™¯ç‚¹
                if (item.y > canvas.height + 50) {
                    scenery.splice(i, 1);
                }
            }
        }
        
        // æ›´æ–°èƒ½é‡é“å…·
        function updatePowerUps() {
            for (let i = powerUps.length - 1; i >= 0; i--) {
                const powerUp = powerUps[i];
                powerUp.y += powerUp.speed;
                powerUp.rotation += 0.03;
                
                // ç¢°æ’æ£€æµ‹
                const dist = Math.sqrt(
                    Math.pow(boatX - powerUp.x, 2) + Math.pow(boatY - powerUp.y, 2)
                );
                
                if (dist < 30 + powerUp.radius && !powerUp.collected) {
                    powerUp.collected = true;
                    applyPowerUp(powerUp.type);
                    createCollectionEffect(powerUp.x, powerUp.y, powerUp.color);
                    powerUps.splice(i, 1);
                    continue;
                }
                
                // ç§»é™¤è¶…å‡ºå±å¹•çš„èƒ½é‡é“å…·
                if (powerUp.y > canvas.height + 50) {
                    powerUps.splice(i, 1);
                }
            }
        }
        
        // åº”ç”¨èƒ½é‡é“å…·æ•ˆæœ
        function applyPowerUp(type) {
            switch(type) {
                case 'health':
                    lives = Math.min(5, lives + 1);
                    break;
                case 'boost':
                    boostActive = true;
                    boostTime = 3;
                    break;
                case 'shield':
                    createShieldEffect();
                    break;
            }
        }
        
        // æ›´æ–°ç²’å­æ•ˆæœ
        function updateParticles() {
            for (let i = particles.length - 1; i >= 0; i--) {
                const particle = particles[i];
                particle.x += particle.vx;
                particle.y += particle.vy;
                particle.life -= 0.02;
                
                if (particle.life <= 0) {
                    particles.splice(i, 1);
                }
            }
        }
        
        // åˆ›å»ºçˆ†ç‚¸æ•ˆæœ
        function createExplosion(x, y, color) {
            for (let i = 0; i < 15; i++) {
                particles.push({
                    x: x,
                    y: y,
                    vx: (Math.random() - 0.5) * 8,
                    vy: (Math.random() - 0.5) * 8,
                    life: 1.0,
                    color: color,
                    size: Math.random() * 4 + 2
                });
            }
        }
        
        // åˆ›å»ºæ”¶é›†æ•ˆæœ
        function createCollectionEffect(x, y, color) {
            for (let i = 0; i < 8; i++) {
                particles.push({
                    x: x,
                    y: y,
                    vx: (Math.random() - 0.5) * 4,
                    vy: (Math.random() - 0.5) * 4,
                    life: 1.0,
                    color: color,
                    size: Math.random() * 3 + 1
                });
            }
        }
        
        // åˆ›å»ºæŠ¤ç›¾æ•ˆæœ
        function createShieldEffect() {
            for (let i = 0; i < 20; i++) {
                const angle = (i / 20) * Math.PI * 2;
                particles.push({
                    x: boatX + Math.cos(angle) * 40,
                    y: boatY + Math.sin(angle) * 40,
                    vx: Math.cos(angle) * 2,
                    vy: Math.sin(angle) * 2,
                    life: 2.0,
                    color: '#9c27b0',
                    size: 3
                });
            }
        }
        
        // æ›´æ–°éš¾åº¦
        function updateDifficulty() {
            difficultyLevel = Math.floor(distance / 500) + 1;
            currentSpeed = 3 + difficultyLevel * 0.5;
            obstacleFrequency = Math.max(0.5, 1.5 - difficultyLevel * 0.1);
            
            const difficultyNames = ['ç®€å•', 'æ™®é€š', 'å›°éš¾', 'ä¸“å®¶', 'å¤§å¸ˆ'];
            difficultyElement.textContent = difficultyNames[Math.min(difficultyLevel - 1, 4)] || 'æé™';
        }
        
        // ç»˜åˆ¶æ¸¸æˆ
        function drawGame() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawRiverBackground();
            drawParticles();
            drawObstacles();
            drawScenery();
            drawPowerUps();
            drawBoat();
            drawUI();
        }
        
        // ç»˜åˆ¶é»„æ²³èƒŒæ™¯
        function drawRiverBackground() {
            const skyGradient = ctx.createLinearGradient(0, 0, 0, 150);
            skyGradient.addColorStop(0, '#1a5276');
            skyGradient.addColorStop(1, '#2980b9');
            ctx.fillStyle = skyGradient;
            ctx.fillRect(0, 0, canvas.width, 150);
            
            const riverGradient = ctx.createLinearGradient(0, 150, 0, canvas.height);
            riverGradient.addColorStop(0, '#2980b9');
            riverGradient.addColorStop(0.6, '#5499c7');
            riverGradient.addColorStop(1, '#85c1e9');
            ctx.fillStyle = riverGradient;
            ctx.fillRect(0, 150, canvas.width, canvas.height - 150);
            
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';
            ctx.lineWidth = 1.5;
            const time = Date.now() * 0.002;
            for (let i = 0; i < canvas.width; i += 30) {
                ctx.beginPath();
                const waveOffset = Math.sin(time + i * 0.1) * 4;
                ctx.moveTo(i, 250 + waveOffset);
                ctx.lineTo(i + 15, 255 + waveOffset);
                ctx.stroke();
            }
            
            ctx.fillStyle = '#8B4513';
            ctx.fillRect(0, canvas.height - 50, canvas.width, 50);
            ctx.fillStyle = '#228B22';
            ctx.fillRect(0, canvas.height - 50, canvas.width, 15);
        }
        
        // ç»˜åˆ¶ç²’å­æ•ˆæœ
        function drawParticles() {
            particles.forEach(particle => {
                ctx.save();
                ctx.globalAlpha = particle.life;
                ctx.fillStyle = particle.color;
                ctx.beginPath();
                ctx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);
                ctx.fill();
                ctx.restore();
            });
        }
        
        // ç»˜åˆ¶éšœç¢ç‰©
        function drawObstacles() {
            obstacles.forEach(obstacle => {
                ctx.save();
                ctx.translate(obstacle.x, obstacle.y);
                ctx.rotate(obstacle.rotation);
                ctx.font = `${obstacle.radius * 1.5}px Arial`;
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(obstacle.emoji, 0, 0);
                ctx.restore();
            });
        }
        
        // ç»˜åˆ¶é£æ™¯ç‚¹
        function drawScenery() {
            scenery.forEach(item => {
                if (item.collected) return;
                ctx.save();
                ctx.translate(item.x, item.y);
                ctx.rotate(item.rotation);
                ctx.font = `${item.radius * 1.5}px Arial`;
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(item.emoji, 0, 0);
                ctx.restore();
            });
        }
        
        // ç»˜åˆ¶èƒ½é‡é“å…·
        function drawPowerUps() {
            powerUps.forEach(powerUp => {
                if (powerUp.collected) return;
                ctx.save();
                ctx.translate(powerUp.x, powerUp.y);
                ctx.rotate(powerUp.rotation);
                ctx.font = `${powerUp.radius * 1.5}px Arial`;
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(powerUp.emoji, 0, 0);
                ctx.restore();
            });
        }
        
        // ç»˜åˆ¶èˆ¹åª
        function drawBoat() {
            ctx.save();
            ctx.translate(boatX, boatY);
            
            ctx.fillStyle = '#8B4513';
            ctx.beginPath();
            ctx.ellipse(0, 0, 25, 12, 0, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.fillStyle = '#A52A2A';
            ctx.fillRect(-15, -15, 30, 10);
            
            ctx.fillStyle = boostActive ? '#ff6b6b' : '#FFFFFF';
            ctx.beginPath();
            ctx.moveTo(0, -15);
            ctx.lineTo(20, -15);
            ctx.lineTo(0, -40);
            ctx.closePath();
            ctx.fill();
            
            ctx.strokeStyle = boostActive ? '#ffffff' : '#FF4444';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(5, -15);
            ctx.lineTo(5, -35);
            ctx.moveTo(10, -15);
            ctx.lineTo(10, -32);
            ctx.stroke();
            
            if (boostActive) {
                ctx.fillStyle = 'rgba(255, 107, 107, 0.6)';
                ctx.beginPath();
                ctx.moveTo(-25, 5);
                ctx.lineTo(-35, 0);
                ctx.lineTo(-25, -5);
                ctx.closePath();
                ctx.fill();
            }
            
            ctx.restore();
        }
        
        // ç»˜åˆ¶UIä¿¡æ¯
        function drawUI() {
            ctx.fillStyle = '#ffffff';
            ctx.font = 'bold 16px Arial';
            ctx.fillText(`åˆ†æ•°: ${score}`, 10, 25);
            ctx.fillText(`ç”Ÿå‘½: ${lives}`, 10, 50);
            ctx.fillText(`è·ç¦»: ${Math.floor(distance)}m`, 10, 75);
            ctx.fillText(`éš¾åº¦: ${difficultyElement.textContent}`, 10, 100);
            
            for (let i = 0; i < lives; i++) {
                ctx.fillStyle = '#ff4444';
                ctx.beginPath();
                ctx.arc(80 + i * 25, 40, 8, 0, Math.PI * 2);
                ctx.fill();
            }
            
            if (boostActive) {
                ctx.fillStyle = '#2196f3';
                ctx.fillRect(canvas.width - 120, 20, 100 * (boostTime / 3), 15);
                ctx.strokeStyle = '#ffffff';
                ctx.strokeRect(canvas.width - 120, 20, 100, 15);
            }
        }
        
        // æ›´æ–°æ˜¾ç¤º
        function updateDisplay() {
            scoreElement.textContent = score;
            livesElement.textContent = lives;
            distanceElement.textContent = `${Math.floor(distance)}m`;
        }
        
        // åˆå§‹åŒ–ç§»åŠ¨ç«¯æ§åˆ¶
        initMobileControls();
        
        // åˆå§‹åŒ–æ¸¸æˆ
        initGame();
    </script>
</body>
</html>