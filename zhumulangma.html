<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç ç©†æœ—ç›å³°2048æŒ‘æˆ˜ - æ–¹å¯¸å±é—´ï¼Œä¸‡é‡Œæ²³å±±</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0a192f, #112240, #1a2a6c);
            color: white;
            min-height: 100vh;
            line-height: 1.6;
        }
        
        header {
            background: rgba(10, 25, 47, 0.95);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-image {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid white;
        }

        .logo-text {
            font-size: 28px;
            font-weight: 700;
            background: linear-gradient(45deg, #64ffda, #4fd3c4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        
        nav ul {
            list-style: none;
            display: flex;
            gap: 1.5rem;
        }
        
        nav a {
            color: white;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            transition: all 0.3s ease;
        }
        
        nav a:hover {
            background: rgba(100, 255, 218, 0.1);
        }
        
        .page-hero {
            position: relative;
            padding: 4rem 2rem;
            text-align: center;
            background: rgba(0, 0, 0, 0.3);
        }
        
        .hero-content h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            background: linear-gradient(45deg, #64ffda, #4fd3c4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .hero-content p {
            font-size: 1.2rem;
            color: #a8b2d1;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .game-container {
            max-width: 800px;
            margin: 2rem auto;
            padding: 2rem;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .game-section {
            text-align: center;
        }
        
        .game-section h3 {
            color: #64ffda;
            margin-bottom: 1rem;
            font-size: 1.8rem;
        }
        
        .game-section p {
            color: #a8b2d1;
            margin-bottom: 2rem;
        }
        
        /* 2048æ¸¸æˆæ ·å¼ */
        .game2048-container {
            margin: 1rem auto;
        }
        
        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding: 0 1rem;
        }
        
        .score-container {
            background: rgba(100, 255, 218, 0.1);
            padding: 1rem 1.5rem;
            border-radius: 10px;
            border: 1px solid rgba(100, 255, 218, 0.3);
        }
        
        .score-label {
            font-size: 0.9rem;
            color: #a8b2d1;
            margin-bottom: 0.5rem;
        }
        
        .score-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #64ffda;
        }
        
        .game-board {
            width: 400px;
            height: 400px;
            margin: 0 auto;
            background: rgba(100, 255, 218, 0.1);
            border: 2px solid #64ffda;
            border-radius: 10px;
            padding: 10px;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-template-rows: repeat(4, 1fr);
            gap: 10px;
        }
        
        .tile {
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            transition: all 0.2s ease;
            background-size: cover;
            background-position: center;
        }
        
        .tile-2 { background-color: rgba(255, 255, 255, 0.8); color: #333; }
        .tile-4 { background-color: rgba(255, 255, 200, 0.8); color: #333; }
        .tile-8 { background-color: rgba(255, 200, 100, 0.8); color: #333; }
        .tile-16 { background-color: rgba(255, 150, 50, 0.8); color: #333; }
        .tile-32 { background-color: rgba(255, 100, 0, 0.8); color: white; }
        .tile-64 { background-color: rgba(255, 50, 0, 0.8); color: white; }
        .tile-128 { background-color: rgba(255, 0, 0, 0.8); color: white; font-size: 20px; }
        .tile-256 { background-color: rgba(200, 0, 0, 0.8); color: white; font-size: 20px; }
        .tile-512 { background-color: rgba(150, 0, 0, 0.8); color: white; font-size: 18px; }
        .tile-1024 { background-color: rgba(100, 0, 0, 0.8); color: white; font-size: 18px; }
        .tile-2048 { 
            background: linear-gradient(45deg, #64ffda, #4fd3c4);;
            color: white;
            font-size: 16px;
        }
        
        /* æ¸¸æˆæ§åˆ¶æŒ‰é’® */
        .game-controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 2rem 0;
            flex-wrap: wrap;
        }
        
        .btn {
            background: #64ffda;
            color: #0a192f;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            font-size: 1rem;
        }
        
        .btn:hover {
            background: #4fd3c4;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(100, 255, 218, 0.3);
        }
        
        .btn-secondary {
            background: transparent;
            color: #64ffda;
            border: 1px solid #64ffda;
        }
        
        .btn-secondary:hover {
            background: rgba(100, 255, 218, 0.1);
        }
        
        /* æ¸¸æˆè¯´æ˜ */
        .game-instructions {
            margin-top: 2rem;
            padding: 1.5rem;
            background: rgba(100, 255, 218, 0.1);
            border-radius: 10px;
            border: 1px solid rgba(100, 255, 218, 0.3);
        }
        
        .game-instructions h4 {
            color: #64ffda;
            margin-bottom: 1rem;
        }
        
        .game-instructions p {
            color: #a8b2d1;
            margin-bottom: 0.5rem;
        }
        
        /* æ¸¸æˆç»“æœ */
        .game-result {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 5px;
            text-align: center;
        }
        
        .success-message {
            background: rgba(76, 175, 80, 0.2);
            border: 1px solid #4caf50;
            color: #4caf50;
            padding: 1rem;
            border-radius: 5px;
        }
        
        .info-message {
            background: rgba(100, 255, 218, 0.1);
            border: 1px solid rgba(100, 255, 218, 0.3);
            color: #64ffda;
            padding: 1rem;
            border-radius: 5px;
        }
        
        footer {
            text-align: center;
            padding: 2rem;
            background: rgba(10, 25, 47, 0.9);
            margin-top: 3rem;
        }
        
        footer a {
            color: #64ffda;
            text-decoration: none;
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .game-board {
                width: 350px;
                height: 350px;
            }
            
            .tile {
                font-size: 20px;
            }
            
            .tile-128, .tile-256 {
                font-size: 18px;
            }
            
            .tile-512, .tile-1024 {
                font-size: 16px;
            }
            
            .tile-2048 {
                font-size: 14px;
            }
        }
        
        @media (max-width: 480px) {
            .game-board {
                width: 300px;
                height: 300px;
            }
            
            .game-header {
                flex-direction: column;
                gap: 1rem;
            }
            
            .tile {
                font-size: 16px;
            }
            
            .tile-128, .tile-256 {
                font-size: 14px;
            }
            
            .tile-512, .tile-1024 {
                font-size: 12px;
            }
            
            .tile-2048 {
                font-size: 10px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">
            <img src="images/item/item.jpg" alt="æ–¹å¯¸å±é—´ï¼Œä¸‡é‡Œæ²³å±±" class="logo-image">
            <span class="logo-text">æ–¹å¯¸å±é—´ï¼Œä¸‡é‡Œæ²³å±±</span>
        </div>
        <nav>
            <ul>
                <li><a href="index.html#mountains" class="btn">è¿”å›</a></li>
            </ul>
        </nav>
    </header>
    
    <section class="page-hero">
        <div class="hero-content">
            <h1>ç ç©†æœ—ç›å³°2048æŒ‘æˆ˜</h1>
            <p>æ”€ç™»æ•°å­—é«˜å³°ï¼Œä½“éªŒ"æ–¹å¯¸å±é—´ï¼Œä¸‡é‡Œæ²³å±±"çš„æ„å¢ƒï¼ŒæŒ‘æˆ˜è‡ªæˆ‘æé™ï¼</p>
        </div>
    </section>
    
    <main class="game-container">
        <div class="game-section">
            <h3>æ•°å­—æ”€ç™»æŒ‘æˆ˜</h3>
            <p>é€šè¿‡åˆå¹¶ç›¸åŒæ•°å­—ï¼Œå‘8848ç±³é«˜çš„ç ç©†æœ—ç›å³°å‘èµ·æŒ‘æˆ˜ï¼</p>
            
            <div class="game2048-container">
                <div class="game-header">
                    <div class="score-container">
                        <div class="score-label">å½“å‰åˆ†æ•°</div>
                        <div class="score-value" id="score">0</div>
                    </div>
                    <div class="score-container">
                        <div class="score-label">æœ€é«˜åˆ†æ•°</div>
                        <div class="score-value" id="bestScore">0</div>
                    </div>
                </div>
                
                <div class="game-board" id="gameBoard">
                    <!-- æ¸¸æˆæ ¼å­å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
                
                <div class="game-controls">
                    <button class="btn" id="newGameBtn">å¼€å§‹æ–°æ¸¸æˆ</button>
                    <button class="btn btn-secondary" id="restartBtn">é‡æ–°å¼€å§‹</button>
                </div>
                
                <div id="gameResult" class="game-result">
                    <div class="info-message">
                        ä½¿ç”¨æ–¹å‘é”®ç§»åŠ¨æ•°å­—æ–¹å—ï¼Œç›¸åŒæ•°å­—ç¢°æ’ä¼šåˆå¹¶æˆæ›´å¤§çš„æ•°å­—ï¼
                    </div>
                </div>
            </div>
            
            <div class="game-instructions">
                <h4>æ¸¸æˆè¯´æ˜</h4>
                <p>ğŸ¯ <strong>æ¸¸æˆç›®æ ‡ï¼š</strong>é€šè¿‡ç§»åŠ¨åˆå¹¶ç›¸åŒæ•°å­—ï¼Œå°½å¯èƒ½åˆ›é€ å‡º2048è¿™ä¸ªæ•°å­—ï¼</p>
                <p>ğŸ® <strong>æ“ä½œæ–¹å¼ï¼š</strong>ä½¿ç”¨é”®ç›˜æ–¹å‘é”®ï¼ˆâ†‘â†“â†â†’ï¼‰ç§»åŠ¨æ•°å­—æ–¹å—</p>
                <p>ğŸ”ï¸ <strong>æ”€ç™»æ„ä¹‰ï¼š</strong>æ¯ä¸ªæ•°å­—ä»£è¡¨ä¸åŒçš„æµ·æ‹”é«˜åº¦ï¼Œ2048è±¡å¾ç€æˆåŠŸç™»é¡¶ï¼</p>
                <p>ğŸ’¡ <strong>å°æŠ€å·§ï¼š</strong>å°½é‡ä¿æŒæœ€å¤§æ•°å­—åœ¨è§’è½ï¼Œè§„åˆ’å¥½ç§»åŠ¨ç­–ç•¥</p>
            </div>
        </div>
    </main>
    
    <footer>
        <p>æ–¹å¯¸å±é—´ï¼Œä¸‡é‡Œæ²³å±±</p>
        <p>2025æ­¦æ±‰å¤§å­¦å‚èµ›ä½œå“ | <a href="message-board.html">åˆ†äº«ä½ çš„å±±æ²³æ•…äº‹</a></p>
    </footer>

    <script>
        // æ¸¸æˆå˜é‡
        let score = 0;
        let bestScore = 0;
        let gameBoard = [];
        const boardSize = 4;
        
        // DOMå…ƒç´ 
        const gameBoardElement = document.getElementById('gameBoard');
        const scoreElement = document.getElementById('score');
        const bestScoreElement = document.getElementById('bestScore');
        const newGameBtn = document.getElementById('newGameBtn');
        const restartBtn = document.getElementById('restartBtn');
        const gameResult = document.getElementById('gameResult');
        
        // åˆå§‹åŒ–æ¸¸æˆ
        function initGame() {
            // åˆå§‹åŒ–æ¸¸æˆæ¿
            gameBoard = Array(boardSize).fill().map(() => Array(boardSize).fill(0));
            
            // æ¸…ç©ºæ¸¸æˆæ¿
            gameBoardElement.innerHTML = '';
            
            // åˆ›å»ºæ¸¸æˆæ ¼å­
            for (let i = 0; i < boardSize; i++) {
                for (let j = 0; j < boardSize; j++) {
                    const tile = document.createElement('div');
                    tile.className = 'tile';
                    tile.id = `tile-${i}-${j}`;
                    gameBoardElement.appendChild(tile);
                }
            }
            
            // é‡ç½®åˆ†æ•°
            score = 0;
            updateScore();
            
            // æ·»åŠ åˆå§‹æ•°å­—
            addRandomTile();
            addRandomTile();
            
            // æ›´æ–°æ¸¸æˆæ¿æ˜¾ç¤º
            updateBoard();
            
            gameResult.innerHTML = `
                <div class="info-message">
                    æ¸¸æˆå¼€å§‹ï¼ä½¿ç”¨æ–¹å‘é”®ç§»åŠ¨æ•°å­—æ–¹å—ï¼Œå‘2048å‘èµ·æŒ‘æˆ˜ï¼
                </div>
            `;
        }
        
        // æ·»åŠ éšæœºæ•°å­—
        function addRandomTile() {
            const emptyCells = [];
            
            // æ‰¾åˆ°æ‰€æœ‰ç©ºæ ¼å­
            for (let i = 0; i < boardSize; i++) {
                for (let j = 0; j < boardSize; j++) {
                    if (gameBoard[i][j] === 0) {
                        emptyCells.push({i, j});
                    }
                }
            }
            
            if (emptyCells.length > 0) {
                // éšæœºé€‰æ‹©ä¸€ä¸ªç©ºæ ¼å­
                const randomCell = emptyCells[Math.floor(Math.random() * emptyCells.length)];
                // 90%æ¦‚ç‡ç”Ÿæˆ2ï¼Œ10%æ¦‚ç‡ç”Ÿæˆ4
                gameBoard[randomCell.i][randomCell.j] = Math.random() < 0.9 ? 2 : 4;
            }
        }
        
        // æ›´æ–°æ¸¸æˆæ¿æ˜¾ç¤º
        function updateBoard() {
            for (let i = 0; i < boardSize; i++) {
                for (let j = 0; j < boardSize; j++) {
                    const tile = document.getElementById(`tile-${i}-${j}`);
                    const value = gameBoard[i][j];
                    
                    tile.textContent = value === 0 ? '' : value;
                    tile.className = 'tile';
                    
                    if (value !== 0) {
                        tile.classList.add(`tile-${value}`);
                    }
                }
            }
        }
        
        // æ›´æ–°åˆ†æ•°
        function updateScore() {
            scoreElement.textContent = score;
            if (score > bestScore) {
                bestScore = score;
                bestScoreElement.textContent = bestScore;
            }
        }
        
        // ç§»åŠ¨æ•°å­—
        function move(direction) {
            let moved = false;
            const oldBoard = JSON.parse(JSON.stringify(gameBoard));
            
            switch(direction) {
                case 'up':
                    moved = moveUp();
                    break;
                case 'down':
                    moved = moveDown();
                    break;
                case 'left':
                    moved = moveLeft();
                    break;
                case 'right':
                    moved = moveRight();
                    break;
            }
            
            if (moved) {
                addRandomTile();
                updateBoard();
                updateScore();
                
                if (checkWin()) {
                    gameResult.innerHTML = `
                        <div class="success-message">
                            ğŸ‰ æ­å–œï¼ä½ æˆåŠŸç™»é¡¶æ•°å­—é«˜å³°2048ï¼ç»§ç»­å‘æ›´é«˜ç›®æ ‡æŒ‘æˆ˜å§ï¼
                        </div>
                    `;
                } else if (checkGameOver()) {
                    gameResult.innerHTML = `
                        <div class="info-message">
                            ğŸ’¥ æ¸¸æˆç»“æŸï¼æ— æ³•ç»§ç»­ç§»åŠ¨ã€‚æœ€ç»ˆå¾—åˆ†ï¼š${score}
                        </div>
                    `;
                }
            }
        }
        
        // å‘ä¸Šç§»åŠ¨
        function moveUp() {
            let moved = false;
            
            for (let j = 0; j < boardSize; j++) {
                for (let i = 1; i < boardSize; i++) {
                    if (gameBoard[i][j] !== 0) {
                        let row = i;
                        while (row > 0 && gameBoard[row - 1][j] === 0) {
                            gameBoard[row - 1][j] = gameBoard[row][j];
                            gameBoard[row][j] = 0;
                            row--;
                            moved = true;
                        }
                        
                        if (row > 0 && gameBoard[row - 1][j] === gameBoard[row][j]) {
                            gameBoard[row - 1][j] *= 2;
                            score += gameBoard[row - 1][j];
                            gameBoard[row][j] = 0;
                            moved = true;
                        }
                    }
                }
            }
            
            return moved;
        }
        
        // å‘ä¸‹ç§»åŠ¨
        function moveDown() {
            let moved = false;
            
            for (let j = 0; j < boardSize; j++) {
                for (let i = boardSize - 2; i >= 0; i--) {
                    if (gameBoard[i][j] !== 0) {
                        let row = i;
                        while (row < boardSize - 1 && gameBoard[row + 1][j] === 0) {
                            gameBoard[row + 1][j] = gameBoard[row][j];
                            gameBoard[row][j] = 0;
                            row++;
                            moved = true;
                        }
                        
                        if (row < boardSize - 1 && gameBoard[row + 1][j] === gameBoard[row][j]) {
                            gameBoard[row + 1][j] *= 2;
                            score += gameBoard[row + 1][j];
                            gameBoard[row][j] = 0;
                            moved = true;
                        }
                    }
                }
            }
            
            return moved;
        }
        
        // å‘å·¦ç§»åŠ¨
        function moveLeft() {
            let moved = false;
            
            for (let i = 0; i < boardSize; i++) {
                for (let j = 1; j < boardSize; j++) {
                    if (gameBoard[i][j] !== 0) {
                        let col = j;
                        while (col > 0 && gameBoard[i][col - 1] === 0) {
                            gameBoard[i][col - 1] = gameBoard[i][col];
                            gameBoard[i][col] = 0;
                            col--;
                            moved = true;
                        }
                        
                        if (col > 0 && gameBoard[i][col - 1] === gameBoard[i][col]) {
                            gameBoard[i][col - 1] *= 2;
                            score += gameBoard[i][col - 1];
                            gameBoard[i][col] = 0;
                            moved = true;
                        }
                    }
                }
            }
            
            return moved;
        }
        
        // å‘å³ç§»åŠ¨
        function moveRight() {
            let moved = false;
            
            for (let i = 0; i < boardSize; i++) {
                for (let j = boardSize - 2; j >= 0; j--) {
                    if (gameBoard[i][j] !== 0) {
                        let col = j;
                        while (col < boardSize - 1 && gameBoard[i][col + 1] === 0) {
                            gameBoard[i][col + 1] = gameBoard[i][col];
                            gameBoard[i][col] = 0;
                            col++;
                            moved = true;
                        }
                        
                        if (col < boardSize - 1 && gameBoard[i][col + 1] === gameBoard[i][col]) {
                            gameBoard[i][col + 1] *= 2;
                            score += gameBoard[i][col + 1];
                            gameBoard[i][col] = 0;
                            moved = true;
                        }
                    }
                }
            }
            
            return moved;
        }
        
        // æ£€æŸ¥æ˜¯å¦è·èƒœ
        function checkWin() {
            for (let i = 0; i < boardSize; i++) {
                for (let j = 0; j < boardSize; j++) {
                    if (gameBoard[i][j] === 2048) {
                        return true;
                    }
                }
            }
            return false;
        }
        
        // æ£€æŸ¥æ¸¸æˆæ˜¯å¦ç»“æŸ
        function checkGameOver() {
            // æ£€æŸ¥æ˜¯å¦æœ‰ç©ºæ ¼å­
            for (let i = 0; i < boardSize; i++) {
                for (let j = 0; j < boardSize; j++) {
                    if (gameBoard[i][j] === 0) {
                        return false;
                    }
                }
            }
            
            // æ£€æŸ¥æ˜¯å¦å¯ä»¥åˆå¹¶
            for (let i = 0; i < boardSize; i++) {
                for (let j = 0; j < boardSize; j++) {
                    const current = gameBoard[i][j];
                    
                    // æ£€æŸ¥å³ä¾§
                    if (j < boardSize - 1 && gameBoard[i][j + 1] === current) {
                        return false;
                    }
                    
                    // æ£€æŸ¥ä¸‹æ–¹
                    if (i < boardSize - 1 && gameBoard[i + 1][j] === current) {
                        return false;
                    }
                }
            }
            
            return true;
        }
        
        // é”®ç›˜æ§åˆ¶
        document.addEventListener('keydown', (e) => {
            switch(e.key) {
                case 'ArrowUp':
                    e.preventDefault();
                    move('up');
                    break;
                case 'ArrowDown':
                    e.preventDefault();
                    move('down');
                    break;
                case 'ArrowLeft':
                    e.preventDefault();
                    move('left');
                    break;
                case 'ArrowRight':
                    e.preventDefault();
                    move('right');
                    break;
            }
        });
        
        // æŒ‰é’®äº‹ä»¶
        newGameBtn.addEventListener('click', initGame);
        restartBtn.addEventListener('click', initGame);
        
        // åˆå§‹åŒ–æ¸¸æˆ
        initGame();
    </script>
</body>
</html>