<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>珠穆朗玛峰2048挑战 - 方寸屏间，万里河山</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0a192f, #112240, #1a2a6c);
            color: white;
            min-height: 100vh;
            line-height: 1.6;
        }
        
        header {
            background: rgba(10, 25, 47, 0.95);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-image {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid white;
        }

        .logo-text {
            font-size: 28px;
            font-weight: 700;
            background: linear-gradient(45deg, #64ffda, #4fd3c4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        
        nav ul {
            list-style: none;
            display: flex;
            gap: 1.5rem;
        }
        
        nav a {
            color: white;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            transition: all 0.3s ease;
        }
        
        nav a:hover {
            background: rgba(100, 255, 218, 0.1);
        }
        
        .page-hero {
            position: relative;
            padding: 4rem 2rem;
            text-align: center;
            background: rgba(0, 0, 0, 0.3);
        }
        
        .hero-content h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            background: linear-gradient(45deg, #64ffda, #4fd3c4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .hero-content p {
            font-size: 1.2rem;
            color: #a8b2d1;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .game-container {
            max-width: 800px;
            margin: 2rem auto;
            padding: 2rem;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .game-section {
            text-align: center;
        }
        
        .game-section h3 {
            color: #64ffda;
            margin-bottom: 1rem;
            font-size: 1.8rem;
        }
        
        .game-section p {
            color: #a8b2d1;
            margin-bottom: 2rem;
        }
        
        /* 2048游戏样式 */
        .game2048-container {
            margin: 1rem auto;
        }
        
        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding: 0 1rem;
        }
        
        .score-container {
            background: rgba(100, 255, 218, 0.1);
            padding: 1rem 1.5rem;
            border-radius: 10px;
            border: 1px solid rgba(100, 255, 218, 0.3);
        }
        
        .score-label {
            font-size: 0.9rem;
            color: #a8b2d1;
            margin-bottom: 0.5rem;
        }
        
        .score-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #64ffda;
        }
        
        .game-board {
            width: 400px;
            height: 400px;
            margin: 0 auto;
            background: rgba(100, 255, 218, 0.1);
            border: 2px solid #64ffda;
            border-radius: 10px;
            padding: 10px;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-template-rows: repeat(4, 1fr);
            gap: 10px;
        }
        
        .tile {
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            transition: all 0.2s ease;
            background-size: cover;
            background-position: center;
        }
        
        .tile-2 { background-color: rgba(255, 255, 255, 0.8); color: #333; }
        .tile-4 { background-color: rgba(255, 255, 200, 0.8); color: #333; }
        .tile-8 { background-color: rgba(255, 200, 100, 0.8); color: #333; }
        .tile-16 { background-color: rgba(255, 150, 50, 0.8); color: #333; }
        .tile-32 { background-color: rgba(255, 100, 0, 0.8); color: white; }
        .tile-64 { background-color: rgba(255, 50, 0, 0.8); color: white; }
        .tile-128 { background-color: rgba(255, 0, 0, 0.8); color: white; font-size: 20px; }
        .tile-256 { background-color: rgba(200, 0, 0, 0.8); color: white; font-size: 20px; }
        .tile-512 { background-color: rgba(150, 0, 0, 0.8); color: white; font-size: 18px; }
        .tile-1024 { background-color: rgba(100, 0, 0, 0.8); color: white; font-size: 18px; }
        .tile-2048 { 
            background: linear-gradient(45deg, #64ffda, #4fd3c4);;
            color: white;
            font-size: 16px;
        }
        
        /* 游戏控制按钮 */
        .game-controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 2rem 0;
            flex-wrap: wrap;
        }
        
        .btn {
            background: #64ffda;
            color: #0a192f;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            font-size: 1rem;
        }
        
        .btn:hover {
            background: #4fd3c4;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(100, 255, 218, 0.3);
        }
        
        .btn-secondary {
            background: transparent;
            color: #64ffda;
            border: 1px solid #64ffda;
        }
        
        .btn-secondary:hover {
            background: rgba(100, 255, 218, 0.1);
        }
        
        /* 游戏说明 */
        .game-instructions {
            margin-top: 2rem;
            padding: 1.5rem;
            background: rgba(100, 255, 218, 0.1);
            border-radius: 10px;
            border: 1px solid rgba(100, 255, 218, 0.3);
        }
        
        .game-instructions h4 {
            color: #64ffda;
            margin-bottom: 1rem;
        }
        
        .game-instructions p {
            color: #a8b2d1;
            margin-bottom: 0.5rem;
        }
        
        /* 游戏结果 */
        .game-result {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 5px;
            text-align: center;
        }
        
        .success-message {
            background: rgba(76, 175, 80, 0.2);
            border: 1px solid #4caf50;
            color: #4caf50;
            padding: 1rem;
            border-radius: 5px;
        }
        
        .info-message {
            background: rgba(100, 255, 218, 0.1);
            border: 1px solid rgba(100, 255, 218, 0.3);
            color: #64ffda;
            padding: 1rem;
            border-radius: 5px;
        }
        
        footer {
            text-align: center;
            padding: 2rem;
            background: rgba(10, 25, 47, 0.9);
            margin-top: 3rem;
        }
        
        footer a {
            color: #64ffda;
            text-decoration: none;
        }
        
        /* 响应式设计 */
        @media (max-width: 768px) {
            .game-board {
                width: 350px;
                height: 350px;
            }
            
            .tile {
                font-size: 20px;
            }
            
            .tile-128, .tile-256 {
                font-size: 18px;
            }
            
            .tile-512, .tile-1024 {
                font-size: 16px;
            }
            
            .tile-2048 {
                font-size: 14px;
            }
        }
        
        @media (max-width: 480px) {
            .game-board {
                width: 300px;
                height: 300px;
            }
            
            .game-header {
                flex-direction: column;
                gap: 1rem;
            }
            
            .tile {
                font-size: 16px;
            }
            
            .tile-128, .tile-256 {
                font-size: 14px;
            }
            
            .tile-512, .tile-1024 {
                font-size: 12px;
            }
            
            .tile-2048 {
                font-size: 10px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">
            <img src="images/item/item.jpg" alt="方寸屏间，万里河山" class="logo-image">
            <span class="logo-text">方寸屏间，万里河山</span>
        </div>
        <nav>
            <ul>
                <li><a href="index.html#mountains" class="btn">返回</a></li>
            </ul>
        </nav>
    </header>
    
    <section class="page-hero">
        <div class="hero-content">
            <h1>珠穆朗玛峰2048挑战</h1>
            <p>攀登数字高峰，体验"方寸屏间，万里河山"的意境，挑战自我极限！</p>
        </div>
    </section>
    
    <main class="game-container">
        <div class="game-section">
            <h3>数字攀登挑战</h3>
            <p>通过合并相同数字，向8848米高的珠穆朗玛峰发起挑战！</p>
            
            <div class="game2048-container">
                <div class="game-header">
                    <div class="score-container">
                        <div class="score-label">当前分数</div>
                        <div class="score-value" id="score">0</div>
                    </div>
                    <div class="score-container">
                        <div class="score-label">最高分数</div>
                        <div class="score-value" id="bestScore">0</div>
                    </div>
                </div>
                
                <div class="game-board" id="gameBoard">
                    <!-- 游戏格子将通过JavaScript动态生成 -->
                </div>
                
                <div class="game-controls">
                    <button class="btn" id="newGameBtn">开始新游戏</button>
                    <button class="btn btn-secondary" id="restartBtn">重新开始</button>
                </div>
                
                <div id="gameResult" class="game-result">
                    <div class="info-message">
                        使用方向键移动数字方块，相同数字碰撞会合并成更大的数字！
                    </div>
                </div>
            </div>
            
            <div class="game-instructions">
                <h4>游戏说明</h4>
                <p>🎯 <strong>游戏目标：</strong>通过移动合并相同数字，尽可能创造出2048这个数字！</p>
                <p>🎮 <strong>操作方式：</strong>使用键盘方向键（↑↓←→）移动数字方块</p>
                <p>🏔️ <strong>攀登意义：</strong>每个数字代表不同的海拔高度，2048象征着成功登顶！</p>
                <p>💡 <strong>小技巧：</strong>尽量保持最大数字在角落，规划好移动策略</p>
            </div>
        </div>
    </main>
    
    <footer>
        <p>方寸屏间，万里河山</p>
        <p>2025武汉大学参赛作品 | <a href="message-board.html">分享你的山河故事</a></p>
    </footer>

    <script>
        // 游戏变量
        let score = 0;
        let bestScore = 0;
        let gameBoard = [];
        const boardSize = 4;
        
        // DOM元素
        const gameBoardElement = document.getElementById('gameBoard');
        const scoreElement = document.getElementById('score');
        const bestScoreElement = document.getElementById('bestScore');
        const newGameBtn = document.getElementById('newGameBtn');
        const restartBtn = document.getElementById('restartBtn');
        const gameResult = document.getElementById('gameResult');
        
        // 初始化游戏
        function initGame() {
            // 初始化游戏板
            gameBoard = Array(boardSize).fill().map(() => Array(boardSize).fill(0));
            
            // 清空游戏板
            gameBoardElement.innerHTML = '';
            
            // 创建游戏格子
            for (let i = 0; i < boardSize; i++) {
                for (let j = 0; j < boardSize; j++) {
                    const tile = document.createElement('div');
                    tile.className = 'tile';
                    tile.id = `tile-${i}-${j}`;
                    gameBoardElement.appendChild(tile);
                }
            }
            
            // 重置分数
            score = 0;
            updateScore();
            
            // 添加初始数字
            addRandomTile();
            addRandomTile();
            
            // 更新游戏板显示
            updateBoard();
            
            gameResult.innerHTML = `
                <div class="info-message">
                    游戏开始！使用方向键移动数字方块，向2048发起挑战！
                </div>
            `;
        }
        
        // 添加随机数字
        function addRandomTile() {
            const emptyCells = [];
            
            // 找到所有空格子
            for (let i = 0; i < boardSize; i++) {
                for (let j = 0; j < boardSize; j++) {
                    if (gameBoard[i][j] === 0) {
                        emptyCells.push({i, j});
                    }
                }
            }
            
            if (emptyCells.length > 0) {
                // 随机选择一个空格子
                const randomCell = emptyCells[Math.floor(Math.random() * emptyCells.length)];
                // 90%概率生成2，10%概率生成4
                gameBoard[randomCell.i][randomCell.j] = Math.random() < 0.9 ? 2 : 4;
            }
        }
        
        // 更新游戏板显示
        function updateBoard() {
            for (let i = 0; i < boardSize; i++) {
                for (let j = 0; j < boardSize; j++) {
                    const tile = document.getElementById(`tile-${i}-${j}`);
                    const value = gameBoard[i][j];
                    
                    tile.textContent = value === 0 ? '' : value;
                    tile.className = 'tile';
                    
                    if (value !== 0) {
                        tile.classList.add(`tile-${value}`);
                    }
                }
            }
        }
        
        // 更新分数
        function updateScore() {
            scoreElement.textContent = score;
            if (score > bestScore) {
                bestScore = score;
                bestScoreElement.textContent = bestScore;
            }
        }
        
        // 移动数字
        function move(direction) {
            let moved = false;
            const oldBoard = JSON.parse(JSON.stringify(gameBoard));
            
            switch(direction) {
                case 'up':
                    moved = moveUp();
                    break;
                case 'down':
                    moved = moveDown();
                    break;
                case 'left':
                    moved = moveLeft();
                    break;
                case 'right':
                    moved = moveRight();
                    break;
            }
            
            if (moved) {
                addRandomTile();
                updateBoard();
                updateScore();
                
                if (checkWin()) {
                    gameResult.innerHTML = `
                        <div class="success-message">
                            🎉 恭喜！你成功登顶数字高峰2048！继续向更高目标挑战吧！
                        </div>
                    `;
                } else if (checkGameOver()) {
                    gameResult.innerHTML = `
                        <div class="info-message">
                            💥 游戏结束！无法继续移动。最终得分：${score}
                        </div>
                    `;
                }
            }
        }
        
        // 向上移动
        function moveUp() {
            let moved = false;
            
            for (let j = 0; j < boardSize; j++) {
                for (let i = 1; i < boardSize; i++) {
                    if (gameBoard[i][j] !== 0) {
                        let row = i;
                        while (row > 0 && gameBoard[row - 1][j] === 0) {
                            gameBoard[row - 1][j] = gameBoard[row][j];
                            gameBoard[row][j] = 0;
                            row--;
                            moved = true;
                        }
                        
                        if (row > 0 && gameBoard[row - 1][j] === gameBoard[row][j]) {
                            gameBoard[row - 1][j] *= 2;
                            score += gameBoard[row - 1][j];
                            gameBoard[row][j] = 0;
                            moved = true;
                        }
                    }
                }
            }
            
            return moved;
        }
        
        // 向下移动
        function moveDown() {
            let moved = false;
            
            for (let j = 0; j < boardSize; j++) {
                for (let i = boardSize - 2; i >= 0; i--) {
                    if (gameBoard[i][j] !== 0) {
                        let row = i;
                        while (row < boardSize - 1 && gameBoard[row + 1][j] === 0) {
                            gameBoard[row + 1][j] = gameBoard[row][j];
                            gameBoard[row][j] = 0;
                            row++;
                            moved = true;
                        }
                        
                        if (row < boardSize - 1 && gameBoard[row + 1][j] === gameBoard[row][j]) {
                            gameBoard[row + 1][j] *= 2;
                            score += gameBoard[row + 1][j];
                            gameBoard[row][j] = 0;
                            moved = true;
                        }
                    }
                }
            }
            
            return moved;
        }
        
        // 向左移动
        function moveLeft() {
            let moved = false;
            
            for (let i = 0; i < boardSize; i++) {
                for (let j = 1; j < boardSize; j++) {
                    if (gameBoard[i][j] !== 0) {
                        let col = j;
                        while (col > 0 && gameBoard[i][col - 1] === 0) {
                            gameBoard[i][col - 1] = gameBoard[i][col];
                            gameBoard[i][col] = 0;
                            col--;
                            moved = true;
                        }
                        
                        if (col > 0 && gameBoard[i][col - 1] === gameBoard[i][col]) {
                            gameBoard[i][col - 1] *= 2;
                            score += gameBoard[i][col - 1];
                            gameBoard[i][col] = 0;
                            moved = true;
                        }
                    }
                }
            }
            
            return moved;
        }
        
        // 向右移动
        function moveRight() {
            let moved = false;
            
            for (let i = 0; i < boardSize; i++) {
                for (let j = boardSize - 2; j >= 0; j--) {
                    if (gameBoard[i][j] !== 0) {
                        let col = j;
                        while (col < boardSize - 1 && gameBoard[i][col + 1] === 0) {
                            gameBoard[i][col + 1] = gameBoard[i][col];
                            gameBoard[i][col] = 0;
                            col++;
                            moved = true;
                        }
                        
                        if (col < boardSize - 1 && gameBoard[i][col + 1] === gameBoard[i][col]) {
                            gameBoard[i][col + 1] *= 2;
                            score += gameBoard[i][col + 1];
                            gameBoard[i][col] = 0;
                            moved = true;
                        }
                    }
                }
            }
            
            return moved;
        }
        
        // 检查是否获胜
        function checkWin() {
            for (let i = 0; i < boardSize; i++) {
                for (let j = 0; j < boardSize; j++) {
                    if (gameBoard[i][j] === 2048) {
                        return true;
                    }
                }
            }
            return false;
        }
        
        // 检查游戏是否结束
        function checkGameOver() {
            // 检查是否有空格子
            for (let i = 0; i < boardSize; i++) {
                for (let j = 0; j < boardSize; j++) {
                    if (gameBoard[i][j] === 0) {
                        return false;
                    }
                }
            }
            
            // 检查是否可以合并
            for (let i = 0; i < boardSize; i++) {
                for (let j = 0; j < boardSize; j++) {
                    const current = gameBoard[i][j];
                    
                    // 检查右侧
                    if (j < boardSize - 1 && gameBoard[i][j + 1] === current) {
                        return false;
                    }
                    
                    // 检查下方
                    if (i < boardSize - 1 && gameBoard[i + 1][j] === current) {
                        return false;
                    }
                }
            }
            
            return true;
        }
        
        // 键盘控制
        document.addEventListener('keydown', (e) => {
            switch(e.key) {
                case 'ArrowUp':
                    e.preventDefault();
                    move('up');
                    break;
                case 'ArrowDown':
                    e.preventDefault();
                    move('down');
                    break;
                case 'ArrowLeft':
                    e.preventDefault();
                    move('left');
                    break;
                case 'ArrowRight':
                    e.preventDefault();
                    move('right');
                    break;
            }
        });
        
        // 按钮事件
        newGameBtn.addEventListener('click', initGame);
        restartBtn.addEventListener('click', initGame);
        
        // 初始化游戏
        initGame();
    </script>
</body>
</html>